# Generated by Ansible.
# This contains the node-to-node IPSEC configuration from this node's
# in the {{ network }} to every other node. This also uses a private
# policy, which will hold packages and drop them if negotiation fails.
{% for other_ip in other_ips %}

conn overcloud-private-node-to-node-{{ network }}-ip-{{ loop.index0 }}
        type=tunnel
        authby=secret
        leftid={{ current_ip }}
        left={{ current_ip }}
        rightid={{ other_ip }}
        right={{ other_ip }}
        failureshunt=drop
        auto=start
        retransmit-timeout=2s
        phase2alg={{ ipsec_algorithm }}
{% endfor %}
